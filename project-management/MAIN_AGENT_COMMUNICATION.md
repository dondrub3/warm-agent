# 与主Agent沟通机制

## 沟通原则

1. **独立性**: Warm Agent子agent保持项目独立性，专注项目执行
2. **定期同步**: 与主agent保持定期进度同步
3. **问题升级**: 遇到重大问题时及时向主agent汇报
4. **成果共享**: 重要成果和发现及时分享给主agent

## 沟通频率与内容

### 1. 每日简报 (异步)
- **时间**: 每日工作结束时
- **方式**: 文档更新 + 简要消息
- **内容**:
  - 当日完成工作
  - 遇到的问题
  - 次日计划
  - 需要支持的事项

### 2. 周度汇报 (同步)
- **时间**: 每周五下午
- **方式**: 正式文档 + 简要讨论
- **内容**:
  - 本周进展总结
  - 下周计划
  - 关键决策需求
  - 风险预警

### 3. 阶段汇报 (正式)
- **时间**: 每个阶段结束时
- **方式**: 完整报告 + 演示
- **内容**:
  - 阶段成果展示
  - 技术验证结果
  - 下一阶段计划
  - 资源需求

### 4. 紧急沟通 (即时)
- **触发条件**:
  - 重大技术障碍
  - 关键资源缺失
  - 重大风险发生
  - 重要决策需求
- **方式**: 即时消息 + 详细说明

## 沟通文档规范

### 1. 进度报告位置
所有进度报告存储在以下位置：
- `project-management/progress/weekly/` - 周报
- `project-management/progress/monthly/` - 月报
- `project-management/meetings/` - 会议记录

### 2. 报告模板
#### 每日简报模板
```
# Warm Agent 项目每日简报 (YYYY-MM-DD)

## 今日完成
- [ ] 任务1
- [ ] 任务2

## 遇到的问题
- 问题1: [描述] [状态]
- 问题2: [描述] [状态]

## 明日计划
- [ ] 计划任务1
- [ ] 计划任务2

## 需要支持
- [ ] 支持需求1
- [ ] 支持需求2
```

#### 周报模板
```
# Warm Agent 项目周报 (第X周)

## 本周概览
- 总体进展: [百分比]
- 关键成果: [列出]
- 主要问题: [列出]

## 详细进展
### 技术调研
- [ ] 完成情况
- [ ] 发现和结论

### 产品定义
- [ ] 完成情况
- [ ] 关键决策

### 项目管理
- [ ] 进度跟踪
- [ ] 资源使用

## 下周计划
### 重点任务
- [ ] 任务1
- [ ] 任务2

### 里程碑
- [ ] 里程碑1
- [ ] 里程碑2

## 问题与风险
### 当前问题
- 问题1: [描述] [负责人] [解决时间]
- 问题2: [描述] [负责人] [解决时间]

### 风险预警
- 风险1: [描述] [概率] [影响] [应对措施]
- 风险2: [描述] [概率] [影响] [应对措施]

## 关键指标
| 指标 | 本周值 | 累计值 | 目标值 | 状态 |
|------|--------|--------|--------|------|
| 任务完成率 | [值] | [值] | [值] | [状态] |
| 文档完成度 | [值] | [值] | [值] | [状态] |
| 预算使用率 | [值] | [值] | [值] | [状态] |
```

## 决策流程

### 1. 日常决策
- **范围**: 技术方案选择、任务优先级调整
- **流程**: 子agent决策 → 记录在文档 → 通知主agent
- **权限**: 子agent全权负责

### 2. 重要决策
- **范围**: 技术方向调整、资源分配、阶段计划变更
- **流程**: 子agent提出建议 → 主agent评审 → 共同决策
- **权限**: 需要主agent批准

### 3. 战略决策
- **范围**: 项目范围变更、商业模式调整、重大合作
- **流程**: 子agent分析 → 主agent决策 → 项目负责人批准
- **权限**: 项目负责人最终决策

## 信息同步机制

### 1. 文档同步
- 所有项目文档实时更新
- 主agent可随时查看最新状态
- 重要变更通过消息通知

### 2. 代码同步
- 代码仓库权限共享
- 定期代码审查
- 重要提交通知

### 3. 数据同步
- 调研数据定期汇总
- 测试结果及时分享
- 用户反馈定期汇报

## 问题升级机制

### 级别定义
| 级别 | 描述 | 响应时间 | 处理方式 |
|------|------|----------|----------|
| **L1 轻微** | 不影响进度的小问题 | 24小时内 | 子agent自行解决 |
| **L2 一般** | 影响单个任务的问题 | 12小时内 | 子agent解决，主agent知晓 |
| **L3 严重** | 影响阶段进度的问题 | 4小时内 | 主agent参与解决 |
| **L4 紧急** | 威胁项目存续的问题 | 1小时内 | 立即上报，共同解决 |

### 升级流程
```
发现问题 → 评估级别 → 记录问题 → 按级别处理 → 跟踪解决
```

## 成果交付标准

### 1. 文档成果
- **格式**: Markdown格式，结构清晰
- **质量**: 内容完整，逻辑清晰，数据准确
- **评审**: 重要文档需要主agent评审
- **存档**: 所有文档版本控制

### 2. 代码成果
- **标准**: 符合编码规范，有完整注释
- **测试**: 有单元测试，通过测试用例
- **文档**: 有API文档和使用说明
- **部署**: 可部署运行

### 3. 数据成果
- **格式**: 结构化数据，标准格式
- **质量**: 数据准确，来源可靠
- **分析**: 有数据分析报告
- **安全**: 敏感数据加密处理

## 沟通效果评估

### 评估指标
| 指标 | 计算方法 | 目标值 |
|------|----------|--------|
| 信息同步及时性 | 及时报告数/总报告数 | ≥95% |
| 问题解决时效 | 问题平均解决时间 | ≤24小时 |
| 决策响应时间 | 决策平均响应时间 | ≤12小时 |
| 沟通满意度 | 主agent满意度评分 | ≥4/5 |

### 评估方法
1. **定期检查**: 每月检查沟通记录
2. **反馈收集**: 定期收集主agent反馈
3. **问题分析**: 分析沟通中存在的问题
4. **持续改进**: 优化沟通流程和方式

## 特殊情况处理

### 1. 主agent不可用
- **短期不可用** (<24小时): 按计划继续执行，记录待决策事项
- **中期不可用** (1-3天): 执行预定计划，暂停重大决策
- **长期不可用** (>3天): 暂停项目，等待进一步指示

### 2. 沟通中断
- **技术故障**: 使用备用沟通渠道
- **理解偏差**: 及时澄清，确认共识
- **信息遗漏**: 建立检查清单，双重确认

### 3. 紧急情况
- **立即通知**: 通过最快渠道通知主agent
- **简要说明**: 说明情况、影响、建议
- **持续更新**: 定期更新处理进展

## 附录

### 附录1: 沟通检查清单
- [ ] 每日简报是否完成
- [ ] 周报是否按时提交
- [ ] 会议记录是否完整
- [ ] 重要决策是否记录
- [ ] 问题是否及时上报

### 附录2: 紧急联系方式
| 情况 | 首选方式 | 备用方式 | 响应时间 |
|------|----------|----------|----------|
| 技术紧急 | 即时消息 | 电话 | 30分钟内 |
| 项目紧急 | 即时消息 | 邮件 | 1小时内 |
| 一般问题 | 文档注释 | 消息 | 24小时内 |

### 附录3: 沟通记录模板
```
# 沟通记录 (YYYY-MM-DD HH:MM)

## 沟通主题
[主题]

## 参与人
- 主agent: [名称]
- 子agent: [名称]

## 沟通内容
[详细内容]

## 决策结果
- 决策1: [内容]
- 决策2: [内容]

## 行动项
| 行动项 | 负责人 | 完成时间 |
|--------|--------|----------|
| [行动1] | [负责人] | [时间] |
| [行动2] | [负责人] | [时间] |

## 下次沟通
- 时间: [时间]
- 内容: [内容]
```

---

**文档版本**: v1.0  
**生效日期**: 2026年2月26日  
**适用对象**: Warm Agent子agent  
**评审周期**: 每月评审更新  
**负责人**: 安安